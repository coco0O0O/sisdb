
# 配置文件说明：
# key 不能包含'.' , 否则搜索的时候会有问题
# include 空格 后跟文件名，相对当前conf的目录
# 数组和集合必须加逗号，最后一个元素不加逗号
# 所有数据都是结构化数据

#------ 以下是对算法编码的表格定义 -------
# 对于release 只有一条记录  RL开头，后面跟6位数字
# 对于debug 会有多条记录   DB开头后面跟6位数字
# 提供删除某条策略的接口，避免数据过多

report:{  #每个算法编号一条记录
  fields: [
  # 字段名| 数据类型| 长度| 
  [code, char, 16],        # 策略算法的内部编码
  [name, char, 16],        # 策略算法的名称
  [start-money, uint, 4],  # 开始资金
  [stop-money, uint, 4],   # 结束资金
  [trade-count, uint, 4],  # 交易次数
  [profit-count, uint, 4], # 盈利次数
  [loss-count, uint, 4],   # 亏损次数
  [max-profit, uint, 4],   # 最大盈利市值
  [max-loss, uint, 4]      # 最大亏损市值 
  ]
}

# # 交易提示 -- 给前端使用
# hint:{
#   scale : second, # 首字段缩放比例 0 表示没有缩放比例
#   limit : 1, # 单只股票最大记录数
#   append-method : always,   # 直接增加
#   fields: [
#   # 字段名| 数据类型| 长度| 
#   [time, int, 4],    # 提示时间 
#   [keep, int, 4],    # 保持时间 
#   [status, int, 4],  # 101 宜空仓 102 宜满仓 103 宜平仓
#         #104 宜观望 201 忌满仓 202 忌建仓
#   [info, char, 16]   # 交易信息 买入或卖出的字节码
#   ]
# }

#------ 以下是对单个算法code的表格定义 -------
# 对资金来说，历史和当前的都放在一个表格中
# 当日
money:{
  scale : date, # 首字段缩放比例 0 表示没有缩放比例
  limit : 1,    # 单只股票最大记录数
  write-method : { 
    sort : "time",  # 以哪个字段进行排序，只能有一个字段
    solely : "time"  # 可多个字段，表示不能重复，重复即代表修改，以time排序
  },
  fields: [
  # 字段名| 数据类型| 长度| 
  [time,   date, 4],      # 资金日期，可以从这个表中获取历史资金变动和最新资金
  [cash,   float, 8],   # 现金
  [holds,  float, 8],   # 持仓市值
  [assets, float, 8],    # 总资产
  [ratio,  uint,  1],   # 比例 
  [limits, float, 8],    # 限制资金
  [freeze, float, 8],   # 冻结现金
  [usable, float, 8]    # 总资产
  ]
}
#历史资金变动
moneylist:{
  scale : date, # 首字段缩放比例 0 表示没有缩放比例
  limit : 0,    # 单只股票最大记录数
  write-method : { 
    sort : "time",  # 以哪个字段进行排序，只能有一个字段
    solely : "time"  # 可多个字段，表示不能重复，重复即代表修改，以time排序
  },
  fields: [
  # 字段名| 数据类型| 长度| 
  [time,   date, 4],      # 资金日期，可以从这个表中获取历史资金变动和最新资金
  [cash,   float, 8],   # 现金
  [holds,  float, 8],   # 持仓市值
  [assets, float, 8],   # 总资产
  [ratio,  uint,  1]    # 限制资金
  ]
}
# 当日股票持仓
stock:{  
  limit : 0, # 单只股票最大记录数
  write-method : { 
    solely : "code"  # 可多个字段，表示不能重复，重复即代表修改，以time排序
  },
  fields: [
  # 字段名| 数据类型| 长度| 
  [time,   uint, 4],   # 更新日期 区分有没有做好除权
  [intime, uint, 4],   # 买入日期 买入时的日期
  [code,   char, 9],   # 股票代码 SH600600
  [volume, int, 4],   # 持仓量
  [cost,   price,4, 2],  # 成本价
  [close,  price,4, 2],  # 最新价
  [freeze, int, 4],  # 冻结股数，当日有效，当日买入的股份
  [usable, int, 4]  # 可卖出的股数，当日有效
  ]
}

#历史持仓 加list关键字
stocklist:{
  scale : date, # 首字段缩放比例 0 表示没有缩放比例
  limit : 0, # 单只股票最大记录数
  write-method : { 
    sort :   "time",  # 以哪个字段进行排序，只能有一个字段
    solely : "time,code"  # 可多个字段，表示不能重复，重复即代表修改，以time排序
  },
  fields: [
  # 字段名| 数据类型| 长度| 
  [time, date, 4], # 日期 因为每天可能很多
  [code, char, 9],  # 股票代码 SH600600
  [volume, int, 4],     # 持仓量
  [cost,  price, 4, 2],  # 成本价
  [close, price, 4, 2]   # 当日收盘价
  ]
}
# 委托单
entrust:{
  scale : second, # 首字段缩放比例 0 表示没有缩放比例
  limit : 0, # 单只股票最大记录数
  write-method : { 
    solely : "time,serial",  # 可多个字段，表示不能重复，重复即代表修改，以time排序
    sort :   "time"  # 以哪个字段进行排序，只能有一个字段
  },
  fields: [
  # 字段名| 数据类型| 长度| 
  [time, second, 4], # 委托时间 
  [serial, uint, 4], # 委托编号 
  [type, char, 1],    # 买卖类型 B S C
  [status, uint, 1],  # 委托单状态
  [code, char, 9],    # 股票代码 SH600600
  [price, price, 4, 2],  # 交易价格
  [volume, int, 4],  # 最小交易数量
  [sort, float, 8, 2],    # 需要排序的值
  [needed, float, 8, 2],  # 资金变动 买单冻结的资金
  [sign, char, 128]  # 交易信息 买入或卖出的字节码
  ]
}
# 历史委托单
entrustlist:{
  scale : second, # 首字段缩放比例 0 表示没有缩放比例
  limit : 0, # 单只股票最大记录数
  write-method : { 
    sort :   "time"  # 以哪个字段进行排序，只能有一个字段
  },
  fields: [
  # 字段名| 数据类型| 长度| 
  [time, second, 4], # 委托时间 
  [serial, uint, 4], # 委托编号 
  [type, char, 1],  # 买卖类型 B S
  [status, uint, 1],  # 委托单状态
  [code, char, 9],  # 股票代码 SH600600
  [price, price, 4, 2],  # 交易价格
  [volume, int, 4],  # 最小交易数量
  [sort, float, 8, 2],  # 需要排序的值
  [needed, float, 8, 2],  # 资金变动 买单冻结的资金
  [sign, char, 128]  # 交易信息 买入或卖出的字节码
  ]
}

# 当日成交单
trade:{
  scale : second, # 首字段缩放比例 0 表示没有缩放比例
  limit : 0, # 单只股票最大记录数
  write-method : { 
    solely : "time,serial",  # 可多个字段，表示不能重复，重复即代表修改，以time排序
    sort :   "time"  # 以哪个字段进行排序，只能有一个字段
  },
  fields: [
  # 字段名| 数据类型| 长度| 
  [time, int, 4], # 交易时间 单位秒
  [serial, uint, 4], # 委托编号 
  [type, char, 1],  # 买卖类型 B S C
  [code, char, 9],  # 股票代码 SH600600
  [price, price, 4, 2],  # 交易价格
  [volume, int, 4],  # 交易数量
  [balance, int, 4],  # 股票余额
  [change, float, 8, 2],  # 资金变动 可能为负数
  [money, float, 8, 2]  # 资金余额
  ]
}
# 历史成交单
tradelist:{
  scale : second, # 首字段缩放比例 0 表示没有缩放比例
  limit : 0, # 单只股票最大记录数
  write-method : { 
    sort :   "time"  # 以哪个字段进行排序，只能有一个字段
  },
  fields: [
  # 字段名| 数据类型| 长度| 
  [time, int, 4], # 交易时间 单位秒
  [serial, uint, 4], # 委托编号 
  [type, char, 1],  # 买卖类型 B S
  [code, char, 9],  # 股票代码 SH600600
  [price, price, 4, 2],  # 交易价格
  [volume, int, 4],  # 交易数量
  [balance, int, 4],  # 股票余额
  [change, float, 8, 2],  # 资金变动 可能为负数
  [money, float, 8, 2]  # 资金余额
  ]
}

# 交易完成对 - 剩余数量为0就生成一条记录
tradepair:{
  scale : second, # 首字段缩放比例 0 表示没有缩放比例
  limit : 0, # 单只股票最大记录数
  fields: [
  # 字段名| 数据类型| 长度| 
  [code, char, 9],  # 股票代码 SH600600
  [in-time,   uint, 4],    # 买入时间 单位秒
  [in-serial, uint, 4],
  [in-price,  price,4, 2], # 买入价格
  [in-volume, int, 4],    # 买入数量
  [out-time,  uint, 4],    
  [out-serial,uint, 4],
  [out-price, price,4, 2], 
  [out-volume,int, 4], 
  [occupy,    uint, 2],    # 资金占用天数 中间可能停牌时间
  [profit,    float, 8, 2],   
  [rate,      float, 4, 2]
  rate
  ]
}
