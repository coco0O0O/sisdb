
# 配置文件说明：
# key 不能包含'.' , 否则搜索的时候会有问题
# include 空格 后跟文件名，相对当前conf的目录
# 数组和集合必须加逗号，最后一个元素不加逗号
# 所有数据都是结构化数据，作为股票默认就会建立这些表格

test:{
#  data-type: struct, # 每条记录为 sh600600:....
  limit : 3, # 单只股票最大记录数
  fields: [
  [name, int, 1, 0, 0, 0, 0]
  ]
}
#------ 以下是对多市场的表格定义 -------
exch:{
  limit : 1 # 单个市场最大记录数
  insert-mode : always,  # 忽略该选项，不做判断直接增加
  update-mode : always,   # 总是修改
  fields: [
  # 字段名| 数据类型| 长度| io 放大还是缩小| 缩放比例 zoom|压缩类型|压缩参考字段索引
  [code, string, 4, 0, 0, 0, 0], # SH SZ
  [name, string, 4, 0, 0, 0, 0], # 沪 深
  [version, uint, 4, 0, 0, 0, 0],  # 版本号，当前行情的编号 同一版本号，即使发出init指令也不再初始化
  [status, int, 1, 0, 0, 0, 0], # 状态，0 初始化 1 正常运行， 2 收盘开始 3 已经收盘
  [tradedate, uint, 4, 0, 0, 0, 0], # 交易日期 当前交易的日期
  [closedate, uint, 4, 0, 0, 0, 0] # 收盘日期 已做完收盘的日期，开市期间和tradedate不一样
  ]
}

#------ 以下是对多市场的表格定义 -------
ttime:{
  limit : 2 # 单个市场最大记录数
  insert-mode : always,  # 开始时间不同才可以修改
  update-mode : always,   # 开始时间不同才可以修改
  fields: [
  # 字段名| 数据类型| 长度| io 放大还是缩小| 缩放比例 zoom|压缩类型|压缩参考字段索引
  [begin, int, 2, 0, 0, 0, 0, 0], # 900-2330 按分钟表示交易开始时间
  [end, int, 2, 0, 0, 0, 0, 0]  # 900-2330 按分钟表示交易开始时间
  ]
}
#------ 以下是对单个股票的表格定义 -------
info:{
  scale : none, # 首字段缩放比例 0 表示没有缩放比例
  limit : 1, # 单只股票最大记录数
  insert-mode : always,  # 忽略该选项，不做判断直接增加
  update-mode : always,   # 总是修改
  fields: [

  # ------ io & zoom 说明 -------
  # io = 0 输入时乘以zoom后取整，输出时除以zoom后保留的小数点个数 对float&double有效
  # 最大支持15位小数,
  # io = 1 输入时除以zoom后取整，输出时乘以zoom后取整 对int有效
  # 最大支持10^15次方,足够表示极大数

  # 字段名| 数据类型| 长度| io 放大还是缩小| 缩放比例 zoom|压缩类型|压缩参考字段索引

  [name, string, 16, 0, 0, 0, 0],
  [type, int, 1, 0, 0, 0, 0],  # 股票类型
  [decimal, int, 1, 0, 0, 0, 0], # 价格小数点
  [volunit, int, 2, 0, 0, 0, 0], # 成交量单位
  [before, int, 4, 0, 2, local, before],
  [stophigh, int, 4, 0, 2, local, before],
  [stoplow, int, 4, 0, 2, local, before]
  ]
}

#------ 以下是对单个股票的表格定义 -------
# 接受到now的更新时，会根据字段同步修改min，tick，day，m5,
now:{
  scale : second, # 按秒增补
  limit : 1, # 单只股票最大记录数
  insert-mode : time,  # 按时间增加记录 
  update-mode : always,   # 总是修改
  fields: [
  # 字段名| 数据类型| 长度| 放大还是缩小|缩放比例|压缩类型|压缩参考字段索引
  [time, int, 4, 0, 0, up, time],
  [open, int, 4, 0, 2, up, close],
  [high, int, 4, 0, 2, local, open],
  [low, int, 4, 0, 2, local, open],
  [close, int, 4, 0, 2, local, open],
  [vol, uint, 4, 1, 2, local, vol],
  [money, uint, 4, 1, 2, multi, vol],
  [buy1, int, 4, 0, 2, local, close],
  [buyv1, int, 4, 0, 0, up, buyv1],
  [sell1, int, 4, 0, 2, local, close],
  [sellv1, int, 4, 0, 0, up, sellv1],
  [buy2, int, 4, 0, 2, local, close],
  [buyv2, int, 4, 0, 0, up, buyv2],
  [sell2, int, 4, 0, 2, local, close],
  [sellv2, int, 4, 0, 0, up, sellv2],
  [buy3, int, 4, 0, 2, local, close],
  [buyv3, int, 4, 0, 0, up, buyv3],
  [sell3, int, 4, 0, 2, local, close],
  [sellv3, int, 4, 0, 0, up, sellv3],
  [buy4, int, 4, 0, 2, local, close],
  [buyv4, int, 4, 0, 0, up, buyv4],
  [sell4, int, 4, 0, 2, local, close],
  [sellv4, int, 4, 0, 0, up, sellv4],
  [buy5, int, 4, 0, 2, local, close],
  [buyv5, int, 4, 0, 0, up, buyv5],
  [sell5, int, 4, 0, 2, local, close],
  [sellv5, int, 4, 0, 0, up, sellv5]
  ]
}

min:{
  scale : index, # 按递增自然数
  limit : 0, # 单只股票最大记录数 0 表示不限制
  insert-mode : time,  # 时间为新的索引就增加新的记录
  update-mode : vol,   # vol增加就修改
  fields: [
  # 字段名| 数据类型| 长度| 放大还是缩小|缩放比例|压缩类型|压缩参考字段索引
  [idx, int, 2, 0, 0, up, idx],
  [open, int, 4, 0, 2, up, close],
  [high, int, 4, 0, 2, local, open],
  [low, int, 4, 0, 2, local, open],
  [close, int, 4, 0, 2, local, open],
  [vol, int, 8, 1, 2, up, vol],
  [money, int, 8, 1, 2, multi, vol]
  ]
}

tick:{
  scale : second, # 按秒增补
  limit : 120, # 单只股票最大记录数
  insert-mode : time,  # 时间为新的日期增加新的记录
  update-mode : none,  # 永远不修改，只增加
  fields: [
# 字段名| 数据类型| 长度| 放大还是缩小|缩放比例|压缩类型|压缩参考字段索引
  [time, int, 4, 0, 0, up, time],
  [close, int, 4, 0, 2, up, close],
  [vol, int, 8, 1, 2, up, vol]
  ]
}
#-------------------------------
day:{
  scale : day, # 按天增补
  insert-mode : time,  # 时间为新的日期增加新的记录
  update-mode : vol,  # 同一天成交量大的可以修改
  fields: [
  # 字段名| 数据类型| 长度| 放大还是缩小|缩放比例|压缩类型|压缩参考字段索引
  [time, int, 4, 0, 0, up, time],
  [open, int, 4, 0, 2, up, close],
  [high, int, 4, 0, 2, local, open],
  [low, int, 4, 0, 2, local, open],
  [close, int, 4, 0, 2, local, open],
  [vol, int, 8, 1, 2, local, vol],
  [money, int, 8, 1, 2, multi, vol]
  ]
}

right:{
  scale : day, # 按天增补
  insert-mode : time,  # 时间为新的日期增加新的记录
  update-mode : always,  # always 总是修改
  fields: [
  # 字段名| 数据类型| 长度| 放大还是缩小|缩放比例|压缩类型|压缩参考字段索引
  [time, int, 4, 0, 0, 0, 0],
  [sgs, int, 4, 0, 0, 0, 0, 0],
  [pxs, int, 4, 0, 0, 0, 0, 0],
  [pgs, int, 4, 0, 0, 0, 0, 0],
  [pgj, int, 4, 0, 0, 0, 0, 0]
  ]
}

m5:{
  scale : min5, # 按5分钟增补
  limit : 4800, # 单只股票最大记录数
  insert-mode : time,  # 时间为新的5分钟时增加新的记录
  update-mode : vol,  # 时间为同5分钟时成交量增长
  fields: [
# 字段名| 数据类型| 长度| 放大还是缩小|缩放比例|压缩类型|压缩参考字段索引
  [time, int, 4, 0, 0, up, time],
  [open, int, 4, 0, 2, up, close],
  [high, int, 4, 0, 2, local, open],
  [low, int, 4, 0, 2, local, open],
  [close, int, 4, 0, 2, local, open],
  [vol, int, 8, 1, 2, local, vol],
  [money, int, 8, 1, 2, multi, vol]
  ]
}

day5:{
  scale : min1, # 按1分钟增补
  limit : 1200, # 单只股票最大记录数
  insert-mode : time,  # 时间为新的一分钟时增加新的记录
  update-mode : vol,  # 时间为同一分钟时成交量增长
  fields: [
# 字段名| 数据类型| 长度| 放大还是缩小|缩放比例|压缩类型|压缩参考字段索引
  [time, int, 4, 0, 0, up, time],
  [close, int, 4, 0, 2, up, close],
  [vol, int, 8, 1, 2, local, vol]
  ]
}
