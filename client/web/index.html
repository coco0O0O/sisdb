<html xmlns="http://www.w3.org/1999/xhtml">
<link href="https://fonts.googleapis.com/css?family=Cousine|Roboto+Mono" rel="stylesheet">

<style>
html, body, .container {
  height: 100%;
  width: 100%;
  background-color: #3b3b42;
  color: #f5f5f5;
}
</style>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>sisdb demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>

<body>
  <div>welcome to sisdb</div>
  <div>db command:</div>
  <div>
    <input type="text" style="width:80%" id="send-msg" value='{"cmd":"show"}' />
    <button onclick="send_string()">submit</button>
  </div>
  <div>
    <div>sdb option</div>
    <input type="button" style="text-align:left; width:80%" value='{"cmd":"sdb.set", "key":"sh600600.day", "val":{"time":20200101,"newp":10050}}' onclick="send_command(this)"/>
    <input type="button" style="text-align:left; width:80%" value='{"cmd":"sdb.set", "key":"sh600600.day", "val":[20200102,101, 105, 100, 103, 1000, 8000]}' onclick="send_command(this)"/>
    <input type="button" style="text-align:left; width:80%" value='{"cmd":"sdb.get", "key":"sh600600.day"}' onclick="send_command(this)"/>
    <input type="button" style="text-align:left; width:80%" value='{"cmd":"sdb.set", "key":"sh600601.day", "val":{"time":20200102,"newp":10150}}' onclick="send_command(this)"/>
    <input type="button" style="text-align:left; width:80%" value='{"cmd":"sdb.get", "key":"sh600601.day"}' onclick="send_command(this)"/>
    <div>---</div>
    <input type="button" style="text-align:left; width:80%" value='{"cmd":"sdb.gets", "key":"*.day"}' onclick="send_command(this)"/>
    <input type="button" style="text-align:left; width:80%" value='{"cmd":"sdb.sub", "key":"sh600600.day"}' onclick="send_command(this)"/>
    <input type="button" style="text-align:left; width:80%" value='{"cmd":"sdb.unsub", "key":"sh600600.day"}' onclick="send_command(this)"/>
    <div>sno option</div>
    <input type="button" style="text-align:left; width:80%" value='{"cmd":"sdb.set", "key":"sh600601.stk_snapshot", "val":{"time":20200101,"newp":80050,"askp1":80800}}' onclick="send_command(this)"/>
    <input type="button" style="text-align:left; width:80%" value='{"cmd":"sdb.get", "key":"sh600601.stk_snapshot"}' onclick="send_command(this)"/>
    <input type="button" style="text-align:left; width:80%" value='{"cmd":"sdb.set", "key":"sh600601.stk_transact", "val":{"time":20200101,"newp":80060,"volume":222000}}' onclick="send_command(this)"/>
    <input type="button" style="text-align:left; width:80%" value='{"cmd":"sdb.get", "key":"sh600601.stk_transact"}' onclick="send_command(this)"/>
    <div>---</div>
    <input type="button" style="text-align:left; width:80%" value='{"cmd":"sdb.subsno", "key":"sh600601.stk_snapshot"}' onclick="send_command(this)"/>
    <input type="button" style="text-align:left; width:80%" value='{"cmd":"sdb.unsubsno", "key":"sh600601.stk_snapshot"}' onclick="send_command(this)"/>
    <input type="button" style="text-align:left; width:80%" value='{"cmd":"sdb.subsno", "key":"sh600601.*"}' onclick="send_command(this)"/>
    <input type="button" style="text-align:left; width:80%" value='{"cmd":"sdb.unsubsno", "key":"sh600601.*"}' onclick="send_command(this)"/>
    <div>del option</div>
    <input type="button" style="text-align:left; width:80%" value='{"cmd":"sdb.del", "key":"sh600600.day", "val":{"search":{"start":0,"stop":-1}}}' onclick="send_command(this)"/>
    <input type="button" style="text-align:left; width:80%" value='{"cmd":"sdb.dels", "key":"*.day", "val":{"search":{"start":0,"stop":-1}}}' onclick="send_command(this)"/>
    <!-- <input type="button" style="text-align:left; width:80%" value='{"cmd":"sdb.drop", "key":"day"}' onclick="send_command(this)"/> -->
  </div>
  <div>normal command:</div>
  <div>
    <input type="button" style="text-align:left; width:80%" value='{"cmd":"sdb.set", "key":"key1", "val":"my is key1."}' onclick="send_command(this)"/>
    <input type="button" style="text-align:left; width:80%" value='{"cmd":"sdb.get", "key":"key1"}' onclick="send_command(this)"/>
    <input type="button" style="text-align:left; width:80%" value='{"cmd":"sdb.del", "key":"key1"}' onclick="send_command(this)"/>
    <input type="button" style="text-align:left; width:80%" value='{"cmd":"sdb.dels", "key":"*"}' onclick="send_command(this)"/>
    <input type="button" style="text-align:left; width:80%" value='{"cmd":"sdb.sub", "key":"key1"}' onclick="send_command(this)"/>
    <input type="button" style="text-align:left; width:80%" value='{"cmd":"sdb.unsub", "key":"key1"}' onclick="send_command(this)"/>
  </div>
  <div>system command:</div>
  <div>
    <input type="button" style="text-align:left; width:80%" value='{"cmd":"auth", "key":"guest", "val":"guest1234"}' onclick="send_command(this)"/>
    <input type="button" style="text-align:left; width:80%" value='{"cmd":"show"}' onclick="send_command(this)"/>
    <input type="button" style="text-align:left; width:80%" value='{"cmd":"save"}' onclick="send_command(this)"/>
    <input type="button" style="text-align:left; width:80%" value='{"cmd":"pack"}' onclick="send_command(this)"/>
    <input type="button" style="text-align:left; width:80%" value='{"cmd":"call"}' onclick="send_command(this)"/>
  </div>
  <div id='recv-msg'></div>
</body>

</html>

<script src="./drive.js"></script>

<script>
  var output = document.getElementById("recv-msg");

  function send_command(doc) {    
    send_single_command(
      { cmd : doc.value },
      function reply(data) {
        output.innerHTML = data;
      });
  }
  function send_string() {
    var doc = document.getElementById("send-msg");
    send_single_command(
      { cmd : doc.value },
      function reply(data) {
        output.innerHTML = data;
      });
  }

</script>